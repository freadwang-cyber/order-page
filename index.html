<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>線上點餐</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            font-size: 24px;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
        }

        h2 {
            font-size: 18px;
            margin-top: 20px;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px dashed #eee;
        }

        .item-info {
            flex-grow: 1;
        }

        .item-info label {
            font-weight: bold;
        }

        .item-options {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .quantity-control {
            display: flex;
            align-items: center;
        }

        .quantity-control button {
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            width: 30px;
            height: 30px;
            cursor: pointer;
        }

        .quantity-control input[type="number"] {
            width: 40px;
            text-align: center;
            border: 1px solid #ccc;
            margin: 0 5px;
        }

        .submit-section {
            text-align: center;
            margin-top: 20px;
        }

        .submit-section button {
            padding: 10px 20px;
            background-color: #007BFF;
            color: #fff;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }

        .summary {
            text-align: center;
            margin-top: 20px;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
        }

        .summary p {
            margin: 5px 0;
        }

        .phone-input {
            margin-top: 15px;
            text-align: center;
        }
        .phone-input input {
            padding: 5px;
            font-size: 16px;
            width: 120px;
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>線上點餐</h1>

        <div class="summary">
            <h2>您的訂單</h2>
            <p>目前沒有商品在訂單中。</p>
            <p>總計: <span id="total-price">$0</span></p>
        </div>
        
        <form id="orderForm" action="https://docs.google.com/forms/d/e/1FAIpQLSdhFpc-NlcsF2lLo-vj6dctP31sOv1sNHqwT1VONeEEoWay8g/formResponse" method="post" target="_blank">

            <div class="phone-input">
                <label for="phone-number">請輸入手機末4碼：</label>
                <input type="text" id="phone-number" name="entry.1315976870" placeholder="後4碼" maxlength="4" required>
            </div>

            <input type="hidden" name="entry.1578389310" id="order-details-input">
            <input type="hidden" name="entry.1761228994" id="total-price-input">


            <h2>主食</h2>

            <div class="order-item" data-item-name="烤肉飯">
                <div class="item-info">
                    <label>烤肉飯</label>
                    <div class="item-options">
                        <input type="radio" id="bbq-small" name="bbq-size" value="小" data-price="80" checked>
                        <label for="bbq-small">小 ($80)</label>
                        <input type="radio" id="bbq-large" name="bbq-size" value="大" data-price="100">
                        <label for="bbq-large">大 ($100)</label>
                    </div>
                </div>
                <div class="quantity-control">
                    <button type="button" onclick="updateQuantity(this, -1)">-</button>
                    <input type="number" value="0" min="0" data-item="bbq" class="item-quantity">
                    <button type="button" onclick="updateQuantity(this, 1)">+</button>
                </div>
            </div>

            <div class="order-item" data-item-name="麻婆豆腐蓋飯">
                <div class="item-info">
                    <label>麻婆豆腐蓋飯</label>
                    <div class="item-options">
                        <input type="radio" id="mapo-small" name="mapo-size" value="小" data-price="90" checked>
                        <label for="mapo-small">小 ($90)</label>
                        <input type="radio" id="mapo-large" name="mapo-size" value="大" data-price="110">
                        <label for="mapo-large">大 ($110)</label>
                    </div>
                </div>
                <div class="item-options">
                    <input type="radio" id="mapo-mild" name="mapo-spicy" value="小辣">
                    <label for="mapo-mild">小辣</label>
                    <input type="radio" id="mapo-medium" name="mapo-spicy" value="中辣">
                    <label for="mapo-medium">中辣</label>
                    <input type="radio" id="mapo-hot" name="mapo-spicy" value="大辣">
                    <label for="mapo-hot">大辣</label>
                </div>
                <div class="quantity-control">
                    <button type="button" onclick="updateQuantity(this, -1)">-</button>
                    <input type="number" value="0" min="0" data-item="mapo" class="item-quantity">
                    <button type="button" onclick="updateQuantity(this, 1)">+</button>
                </div>
            </div>
            
            <div class="order-item" data-item-name="馬鈴薯燉肉蓋飯">
                <div class="item-info">
                    <label>馬鈴薯燉肉蓋飯</label>
                    <div class="item-options">
                        <input type="radio" id="potato-small" name="potato-size" value="小" data-price="95" checked>
                        <label for="potato-small">小 ($95)</label>
                        <input type="radio" id="potato-large" name="potato-size" value="大" data-price="115">
                        <label for="potato-large">大 ($115)</label>
                    </div>
                </div>
                <div class="quantity-control">
                    <button type="button" onclick="updateQuantity(this, -1)">-</button>
                    <input type="number" value="0" min="0" data-item="potato" class="item-quantity">
                    <button type="button" onclick="updateQuantity(this, 1)">+</button>
                </div>
            </div>

            <h2>甜點</h2>

            <div class="order-item" data-item-name="小米甜甜圈">
                <div class="item-info">
                    <label>小米甜甜圈</label>
                    <div class="item-options">
                        <span data-price="40">($40)</span>
                    </div>
                </div>
                <div class="quantity-control">
                    <button type="button" onclick="updateQuantity(this, -1)">-</button>
                    <input type="number" value="0" min="0" data-item="donut" class="item-quantity">
                    <button type="button" onclick="updateQuantity(this, 1)">+</button>
                </div>
            </div>
            
            <div class="order-item" data-item-name="月餅">
                <div class="item-info">
                    <label>月餅</label>
                    <div class="item-options">
                        <span data-price="50">($50)</span>
                    </div>
                </div>
                <div class="quantity-control">
                    <button type="button" onclick="updateQuantity(this, -1)">-</button>
                    <input type="number" value="0" min="0" data-item="mooncake" class="item-quantity">
                    <button type="button" onclick="updateQuantity(this, 1)">+</button>
                </div>
            </div>
            
            <div class="order-item" data-item-name="愛玉">
                <div class="item-info">
                    <label>愛玉</label>
                    <div class="item-options">
                        <span data-price="45">($45)</span>
                    </div>
                </div>
                <div class="quantity-control">
                    <button type="button" onclick="updateQuantity(this, -1)">-</button>
                    <input type="number" value="0" min="0" data-item="aiyu" class="item-quantity">
                    <button type="button" onclick="updateQuantity(this, 1)">+</button>
                </div>
            </div>

            <h2>飲料</h2>

            <div class="order-item" data-item-name="紅茶">
                <div class="item-info">
                    <label>紅茶</label>
                    <div class="item-options">
                        <input type="radio" id="tea-small" name="tea-size" value="小" data-price="30" checked>
                        <label for="tea-small">小 ($30)</label>
                        <input type="radio" id="tea-large" name="tea-size" value="大" data-price="40">
                        <label for="tea-large">大 ($40)</label>
                    </div>
                </div>
                <div class="quantity-control">
                    <button type="button" onclick="updateQuantity(this, -1)">-</button>
                    <input type="number" value="0" min="0" data-item="tea" class="item-quantity">
                    <button type="button" onclick="updateQuantity(this, 1)">+</button>
                </div>
            </div>
            
            <div class="order-item" data-item-name="甘蔗青茶">
                <div class="item-info">
                    <label>甘蔗青茶</label>
                    <div class="item-options">
                        <input type="radio" id="sugarcane-small" name="sugarcane-size" value="小" data-price="50" checked>
                        <label for="sugarcane-small">小 ($50)</label>
                        <input type="radio" id="sugarcane-large" name="sugarcane-size" value="大" data-price="60">
                        <label for="sugarcane-large">大 ($60)</label>
                    </div>
                </div>
                <div class="quantity-control">
                    <button type="button" onclick="updateQuantity(this, -1)">-</button>
                    <input type="number" value="0" min="0" data-item="sugarcane-tea" class="item-quantity">
                    <button type="button" onclick="updateQuantity(this, 1)">+</button>
                </div>
            </div>

            <div class="submit-section">
                <button type="submit">送出訂單</button>
            </div>
        </form>
    </div>

    <script>
        // 計算總價並更新顯示
        function calculateTotal() {
            let total = 0;
            const orderDetails = []; // 存儲訂單詳情的陣列

            document.querySelectorAll('.order-item').forEach(item => {
                const quantityInput = item.querySelector('.item-quantity');
                const quantity = parseInt(quantityInput.value);

                if (quantity > 0) {
                    const itemName = item.dataset.itemName;
                    let itemPrice = 0;
                    let itemSize = '';
                    let itemSpicy = '';

                    // 檢查是否有選項 (例如大小或辣度)
                    const selectedSize = item.querySelector('input[type="radio"]:checked');
                    if (selectedSize) {
                        itemPrice = parseInt(selectedSize.dataset.price);
                        itemSize = selectedSize.value;
                    } else {
                        // 如果沒有選項，直接取 data-price
                        const priceSpan = item.querySelector('[data-price]');
                        if (priceSpan) {
                            itemPrice = parseInt(priceSpan.dataset.price);
                        }
                    }

                    const selectedSpicy = item.querySelector('input[name*="spicy"]:checked');
                    if (selectedSpicy) {
                        itemSpicy = selectedSpicy.value;
                    }

                    total += itemPrice * quantity;
                    
                    // 組裝訂單詳情字串
                    let detail = `${itemName}`;
                    if (itemSize) detail += ` (${itemSize})`;
                    if (itemSpicy) detail += ` (${itemSpicy})`;
                    detail += ` x ${quantity}份`;
                    orderDetails.push(detail);
                }
            });

            // 更新總價顯示
            document.getElementById('total-price').textContent = `$${total}`;

            // 更新隱藏的 input 欄位，準備提交給 Google 表單
            document.getElementById('total-price-input').value = total;
            document.getElementById('order-details-input').value = orderDetails.join(', ');
        }

        // 數量控制按鈕
        function updateQuantity(button, change) {
            const quantityInput = button.parentNode.querySelector('.item-quantity');
            let currentValue = parseInt(quantityInput.value);
            currentValue += change;
            if (currentValue < 0) {
                currentValue = 0;
            }
            quantityInput.value = currentValue;
            calculateTotal();
        }
        
        // 監聽所有選項的變動，即時更新總價
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', calculateTotal);
        });
        
        // 監聽數量輸入框的變動
        document.querySelectorAll('.item-quantity').forEach(input => {
            input.addEventListener('change', calculateTotal);
            input.addEventListener('input', calculateTotal);
        });

        // 初始化
        calculateTotal();
    </script>
</body>
</html>
